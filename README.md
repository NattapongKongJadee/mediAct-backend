<p align="center">
  <a href="http://nestjs.com/" target="blank"><img src="https://nestjs.com/img/logo-small.svg" width="120" alt="Nest Logo" /></a>
</p>

[circleci-image]: https://img.shields.io/circleci/build/github/nestjs/nest/master?token=abc123def456
[circleci-url]: https://circleci.com/gh/nestjs/nest

## Description
[Nest](https://github.com/nestjs/nest) framework TypeScript starter repository.

## Relation in Database
<img width="712" height="736" alt="mediActAssingment drawio" src="https://github.com/user-attachments/assets/2f841c86-2d35-4054-b422-7b5793c08273" />

## Description (database)
‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡πÅ‡∏ö‡∏ö‡∏¢‡πà‡∏≠
1) User
	-	‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ: nurse ‡πÅ‡∏•‡∏∞ head_nurse
	-	‡∏ü‡∏¥‡∏•‡∏î‡πå‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç: email (unique), role
	-	‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå:
	-	createdShifts: ‡πÄ‡∏ß‡∏£‡∏ó‡∏µ‡πà‡∏´‡∏±‡∏ß‡∏´‡∏ô‡πâ‡∏≤‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•‡∏™‡∏£‡πâ‡∏≤‡∏á
	-	assignments: ‡πÄ‡∏ß‡∏£‡∏ó‡∏µ‡πà‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•‡∏ñ‡∏π‡∏Å‡∏à‡∏±‡∏î
	-	approvedLeaves: ‡πÉ‡∏ö‡∏•‡∏≤‡∏ó‡∏µ‡πà‡∏´‡∏±‡∏ß‡∏´‡∏ô‡πâ‡∏≤‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥/‡∏õ‡∏è‡∏¥‡πÄ‡∏™‡∏ò

2) Shift
	-	‡∏Å‡∏≥‡∏´‡∏ô‡∏î ‚Äú‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏£‚Äù: date (‡∏ß‡∏±‡∏ô‡∏Ç‡∏≠‡∏á‡πÄ‡∏ß‡∏£), startTime, endTime
	-	‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏î‡∏¢ createdById (FK ‚Üí User.id, ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏´‡∏±‡∏ß‡∏´‡∏ô‡πâ‡∏≤)
	-	Constraint ‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç: @@unique([date, startTime, endTime]) ‡∏Å‡∏±‡∏ô‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏ß‡∏£‡∏ã‡πâ‡∏≥‡∏ß‡∏±‡∏ô‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô
	-	‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå: ‡∏°‡∏µ‡∏´‡∏•‡∏≤‡∏¢ ShiftAssignment

3) ShiftAssignment
	-	‡∏Å‡∏≤‡∏£ ‚Äú‡∏à‡∏±‡∏î‡πÄ‡∏ß‡∏£‚Äù ‡πÉ‡∏´‡πâ‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏• 1 ‡∏Ñ‡∏ô‡∏Å‡∏±‡∏ö‡πÄ‡∏ß‡∏£ 1 ‡∏Å‡∏∞
	-	Unique: @@unique([userId, shiftId]) ‡∏Å‡∏±‡∏ô‡∏à‡∏±‡∏î‡∏ã‡πâ‡∏≥‡∏Ñ‡∏ô‡πÄ‡∏î‡∏¥‡∏°‡πÉ‡∏ô‡πÄ‡∏ß‡∏£‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô
	-	Soft status:
	-	isActive: ‡πÅ‡∏™‡∏î‡∏á‡∏ß‡πà‡∏≤‡πÅ‡∏ñ‡∏ß‡∏ô‡∏µ‡πâ‡∏¢‡∏±‡∏á‡∏°‡∏µ‡∏ú‡∏•‡∏≠‡∏¢‡∏π‡πà‡πÑ‡∏´‡∏° (‡∏ä‡πà‡∏ß‡∏¢‡∏ó‡∏≥‡πÉ‡∏´‡πâ ‚Äú‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡∏•‡∏≤‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏ß‡∏£‡∏ß‡πà‡∏≤‡∏á‚Äù ‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏•‡∏ö‡πÅ‡∏ñ‡∏ß)
	-	revokedAt: ‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÅ‡∏ñ‡∏ß‡∏ñ‡∏π‡∏Å‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å (‡πÄ‡∏ä‡πà‡∏ô ‡∏´‡∏•‡∏±‡∏á‡πÉ‡∏ö‡∏•‡∏≤ approved)
	-	‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå: ‡∏°‡∏µ‡∏´‡∏•‡∏≤‡∏¢ LeaveRequest (‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•‡∏¢‡∏∑‡πà‡∏ô‡∏´‡∏•‡∏≤‡∏¢‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÑ‡∏î‡πâ ‡πÅ‡∏ï‡πà‡∏û‡∏¥‡∏à‡∏≤‡∏£‡∏ì‡∏≤‡∏à‡∏≤‡∏Å‡πÉ‡∏ö‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î)

4) LeaveRequest
	-	‡πÉ‡∏ö‡∏Ç‡∏≠‡∏•‡∏≤‡∏à‡∏≤‡∏Å‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏• (‡∏ú‡∏π‡∏Å‡∏Å‡∏±‡∏ö ShiftAssignment)
	-	‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞: pending | approved | rejected
	-	approvedById: ‡∏ú‡∏π‡πâ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥ (‡∏´‡∏±‡∏ß‡∏´‡∏ô‡πâ‡∏≤‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•), optional (‡∏ï‡∏≠‡∏ô pending ‡∏¢‡∏±‡∏á‡∏ß‡πà‡∏≤‡∏á)
	-	‡∏Å‡∏≤‡∏£‡∏•‡∏≠‡∏à‡∏¥‡∏Å‡∏ó‡∏µ‡πà‡∏û‡∏ö‡∏ö‡πà‡∏≠‡∏¢:
	-	‡πÄ‡∏°‡∏∑‡πà‡∏≠ approved ‚Üí ‡πÑ‡∏õ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï ShiftAssignment.isActive = false ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÄ‡∏ß‡∏£‡∏ô‡∏±‡πâ‡∏ô ‚Äú‡∏ß‡πà‡∏≤‡∏á‚Äù ‡πÅ‡∏•‡∏∞‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ assign ‡πÉ‡∏´‡∏°‡πà‡πÑ‡∏î‡πâ


## Project setup

```bash
$ npm install
```
## üß™ ‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏£‡∏∞‡∏ö‡∏ö‡∏î‡πâ‡∏ß‡∏¢ Swagger & Docker Compose

### üöÄ ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ Swagger ‡∏ó‡∏î‡∏™‡∏≠‡∏ö API
‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ‡∏ô‡∏µ‡πâ‡πÑ‡∏î‡πâ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á **Swagger UI** ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ä‡πà‡∏ß‡∏¢‡∏ó‡∏î‡∏™‡∏≠‡∏ö API ‡πÑ‡∏î‡πâ‡∏á‡πà‡∏≤‡∏¢ ‡πÜ ‡∏ú‡πà‡∏≤‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö  
- ‡πÄ‡∏õ‡∏¥‡∏î‡πÑ‡∏î‡πâ‡∏ó‡∏µ‡πà: [http://localhost:3000/api](http://localhost:3000/api)  
- Swagger ‡∏à‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏ó‡∏∏‡∏Å endpoint ‡πÄ‡∏ä‡πà‡∏ô
  - `POST /auth/register` ‚Äî ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÉ‡∏´‡∏°‡πà
  - `POST /auth/login` ‚Äî ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏•‡∏∞‡∏£‡∏±‡∏ö JWT token
  - `POST /shifts` ‚Äî (‡∏´‡∏±‡∏ß‡∏´‡∏ô‡πâ‡∏≤) ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏ß‡∏£
  - `POST /shift-assignments` ‚Äî (‡∏´‡∏±‡∏ß‡∏´‡∏ô‡πâ‡∏≤) ‡∏à‡∏±‡∏î‡πÄ‡∏ß‡∏£‡πÉ‡∏´‡πâ‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•
  - `GET /my-schedule` ‚Äî (‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•) ‡∏î‡∏π‡πÄ‡∏ß‡∏£‡∏Ç‡∏≠‡∏á‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á
  - `POST /leave-requests` ‚Äî (‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•) ‡∏Ç‡∏≠‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡∏•‡∏≤
  - `PATCH /leave-requests/:id/approve` ‚Äî (‡∏´‡∏±‡∏ß‡∏´‡∏ô‡πâ‡∏≤) ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥/‡∏õ‡∏è‡∏¥‡πÄ‡∏™‡∏ò‡∏Ñ‡∏≥‡∏Ç‡∏≠‡∏•‡∏≤

‚ö†Ô∏è **Protected Routes**  
- API ‡∏ö‡∏≤‡∏á‡∏ï‡∏±‡∏ß‡∏ñ‡∏π‡∏Å‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏î‡πâ‡∏ß‡∏¢ **JWT Auth**  
- ‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥‡∏Å‡∏≤‡∏£ `POST /auth/login` ‡∏Å‡πà‡∏≠‡∏ô ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏±‡∏ö `access_token`  
- ‡∏à‡∏≤‡∏Å‡∏ô‡∏±‡πâ‡∏ô‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° üîì Authorize ‡πÉ‡∏ô Swagger ‡πÅ‡∏•‡πâ‡∏ß‡πÉ‡∏™‡πà‡∏Ñ‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô:  


---

### üê≥ ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ Docker Compose ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ‡∏ô‡∏µ‡πâ‡∏°‡∏µ‡πÑ‡∏ü‡∏•‡πå `docker-compose.yml` ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏±‡∏ô **PostgreSQL** ‡πÅ‡∏•‡∏∞ **pgAdmin** ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•

‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏´‡∏•‡∏±‡∏Å:
```bash
# ‡∏£‡∏±‡∏ô‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏•‡∏∞ pgAdmin
docker compose up -d

# ‡∏î‡∏π container ‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏£‡∏±‡∏ô
docker compose ps

# ‡∏´‡∏¢‡∏∏‡∏î‡πÅ‡∏•‡∏∞‡∏•‡∏ö container
docker compose down



## Compile and run the project

```bash
# development
$ npm run start

# watch mode
$ npm run start:dev

# production mode
$ npm run start:prod
```



